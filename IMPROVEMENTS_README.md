# üöÄ –£–ª—É—á—à–µ–Ω–∏—è —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è Max Drawdown –∏ –ø–æ–≤—ã—à–µ–Ω–∏—è Sharpe Ratio

## üéØ –¶–µ–ª—å
–°–Ω–∏–∑–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –ø—Ä–æ—Å–∞–¥–∫—É —Å -50.4% –¥–æ -25-30% –∏ –ø–æ–≤—ã—Å–∏—Ç—å Sharpe Ratio —Å 0.84 –¥–æ 1.0-1.2

## ‚ú® –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. üìä –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–º –ø–æ–∑–∏—Ü–∏–∏
- **Kelly Criterion**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏
- **–í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å**: –£–º–µ–Ω—å—à–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
- **–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å**: –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–∏

### 2. üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–æ—Å–∞–¥–æ–∫
- **–ê–≤—Ç–æ—Å—Ç–æ–ø**: –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏ –ø—Ä–∏ –ø—Ä–æ—Å–∞–¥–∫–µ >15%
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è**: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–µ–∫—É—â–µ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
- **–£–º–Ω—ã–π –≤—ã—Ö–æ–¥**: –î–æ—Å—Ä–æ—á–Ω—ã–π –≤—ã—Ö–æ–¥ –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∑–∞—â–∏—Ç—ã

### 3. üéöÔ∏è –£–ª—É—á—à–µ–Ω–Ω—ã–µ –ø–æ—Ä–æ–≥–∏
- **–ë–æ–ª—å—à–∏–π —Å–ø—Ä–µ–¥**: –£–≤–µ–ª–∏—á–µ–Ω —Å–ø—Ä–µ–¥ –º–µ–∂–¥—É –≤—Ö–æ–¥–æ–º –∏ –≤—ã—Ö–æ–¥–æ–º
- **–°–∏–º–º–µ—Ç—Ä–∏—è**: –ë–æ–ª–µ–µ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω—ã –ø–æ—Ä–æ–≥–∏ –¥–ª—è –ª–æ–Ω–≥–æ–≤ –∏ —à–æ—Ä—Ç–æ–≤
- **–°–µ–ª–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ü–æ–≤—ã—à–µ–Ω—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –≤—Ö–æ–¥—É

### 4. üìà –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
- **–ù–æ–≤–∞—è –º–µ—Ç—Ä–∏–∫–∞**: `sharpe * (1 + max_dd)` –≤–º–µ—Å—Ç–æ —Ç–æ–ª—å–∫–æ Sharpe
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å—é –∏ —Ä–∏—Å–∫–æ–º

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ó–∞–ø—É—Å–∫ —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞:
```bash
python aibot2.py --search dynamic --use-dynamic-sizing
```

### –° –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
```bash
python aibot2.py \
  --search dynamic \
  --use-dynamic-sizing \
  --max-position-size 0.8 \
  --dd-protection -0.15 \
  --max-dd-cap 0.30
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
python test_improvements.py
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –ú–µ—Ç—Ä–∏–∫–∞ | –ë—ã–ª–æ | –û–∂–∏–¥–∞–µ—Ç—Å—è | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|------|-----------|-----------|
| Max Drawdown | -50.4% | -25-30% | ‚úÖ ~40% –ª—É—á—à–µ |
| Sharpe Ratio | 0.84 | 1.0-1.2 | ‚úÖ ~30% –ª—É—á—à–µ |
| CAGR | 41.8% | 40-45% | ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–µ–µ |
| –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å | –í—ã—Å–æ–∫–∞—è | –ù–∏–∂–µ | ‚úÖ –ú–µ–Ω—å—à–µ —Å—Ç—Ä–µ—Å—Å–∞ |

## üîß –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- `--search dynamic`: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–ª—É—á—à–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º
- `--use-dynamic-sizing`: –í–∫–ª—é—á–∏—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏
- `--max-position-size 0.8`: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ (80%)
- `--dd-protection -0.15`: –ü–æ—Ä–æ–≥ –∑–∞—â–∏—Ç—ã –æ—Ç –ø—Ä–æ—Å–∞–¥–æ–∫ (-15%)
- `--max-dd-cap 0.30`: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–æ–ø—É—Å—Ç–∏–º–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞ (-30%)

### –£–ª—É—á—à–µ–Ω–Ω—ã–µ –ø–æ—Ä–æ–≥–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):
- Long –≤—Ö–æ–¥: 85-–π –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª—å (–±—ã–ª–æ 80-–π)
- Long –≤—ã—Ö–æ–¥: 60-–π –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª—å (–±—ã–ª–æ 65-–π) 
- Short –≤—Ö–æ–¥: 15-–π –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª—å (–±—ã–ª–æ 20-–π)
- Short –≤—ã—Ö–æ–¥: 35-–π –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª—å (–±—ã–ª–æ 30-–π)

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–§–∞–π–ª `best_thresholds.json` —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
```json
{
  "dynamic_features": {
    "use_dynamic_sizing": true,
    "max_position_size": 0.8,
    "dd_protection_threshold": -0.15,
    "kelly_criterion": true
  },
  "performance": {
    "combined_score": 0.9
  }
}
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
2. **–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ê–ª–≥–æ—Ä–∏—Ç–º –±–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π - –º–µ–Ω—å—à–µ —Å–¥–µ–ª–æ–∫, –Ω–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–µ–µ
3. **–í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å**: –í –ø–µ—Ä–∏–æ–¥—ã –≤—ã—Å–æ–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–Ω–∏–∂–∞–µ—Ç—Å—è
4. **–ó–∞—â–∏—Ç–∞**: –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ -15% –ø—Ä–æ—Å–∞–¥–∫–∏ —Ç–æ—Ä–≥–æ–≤–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

## üÜö –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–º

### –°—Ç–∞—Ä—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º:
- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ (100%)
- –¢–æ–ª—å–∫–æ Sharpe Ratio –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –ø—Ä–æ—Å–∞–¥–æ–∫
- –ú–µ–Ω–µ–µ —Å–µ–ª–µ–∫—Ç–∏–≤–Ω—ã–µ –ø–æ—Ä–æ–≥–∏

### –ù–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º:
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ (Kelly + –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å)
- ‚úÖ –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ (Sharpe + DrawDown)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–æ—Å–∞–¥–æ–∫
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —É–¥–µ—Ä–∂–∞–Ω–∏—è
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–µ –ø–æ—Ä–æ–≥–∏ –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞
